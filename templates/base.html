<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#0066ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="FinBrain">
    
    <title>{% block title %}FinBrain - AI Financial Assistant{% endblock %}</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.webmanifest">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/static/icons/icon-192.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/static/icons/icon-192.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/static/icons/icon-512.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/app.css">
    
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.12" defer></script>
    
    <!-- PWA Script -->
    <script src="/static/js/pwa.js" defer></script>
</head>
<body>
    <!-- Offline Banner -->
    <div id="offline-banner" class="offline-banner hidden" role="alert" aria-live="polite">
        <div class="offline-banner-content">
            <span class="offline-icon">ðŸ“¶</span>
            <span>You're offline. Some features may be limited.</span>
        </div>
    </div>

    <!-- Install Banner -->
    <div id="install-banner" class="install-banner hidden" role="banner">
        <div class="install-banner-content">
            <span class="install-icon">ðŸ“±</span>
            <span>Install FinBrain for quick access</span>
            <button id="install-button" class="btn btn-primary btn-sm">Install</button>
            <button id="install-dismiss" class="btn btn-neutral btn-sm">Not now</button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="app-container">
        {% block content %}{% endblock %}
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav" role="navigation" aria-label="Main navigation">
        <a href="/chat" class="nav-item {% if request.endpoint == 'pwa_ui.chat' %}active{% endif %}" 
           aria-label="Chat and expense tracking">
            <div class="nav-icon">ðŸ’¬</div>
            <span class="nav-label">Chat</span>
        </a>
        
        <a href="/report" class="nav-item {% if request.endpoint == 'pwa_ui.report' %}active{% endif %}"
           aria-label="Financial reports and insights">
            <div class="nav-icon">ðŸ“Š</div>
            <span class="nav-label">Report</span>
        </a>
        
        <a href="/profile" class="nav-item {% if request.endpoint == 'pwa_ui.profile' %}active{% endif %}"
           aria-label="User profile and settings">
            <div class="nav-icon">ðŸ‘¤</div>
            <span class="nav-label">Profile</span>
        </a>
        
        <a href="/challenge" class="nav-item {% if request.endpoint == 'pwa_ui.challenge' %}active{% endif %}"
           aria-label="Financial challenges and goals">
            <div class="nav-icon">ðŸŽ¯</div>
            <span class="nav-label">Challenge</span>
        </a>
    </nav>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true">
        <!-- Toasts will be dynamically inserted here -->
    </div>
    
</body>
</html>