Audit Transparency (UI)
🎯 PM View — Why It Matters

Trust is the product. Users won’t stick if they think their financial records are silently altered.

Transparency builds confidence. Showing “what was logged” vs. “what you corrected” reassures users that the system is both accurate and under their control.

User promise: “finbrain never hides the truth. You’ll always see the original record, and if you change it, your view updates—but the raw stays intact.”

Example in Chat:

Original: Lunch 500 (Food)
Corrected: Entertainment (your view)

This gives users a clear, auditable trail without needing to trust the AI blindly.

🛠 CTO View — How We Implement Safely

Core Ledger Untouchable:

The transactions_raw table remains append-only. Nothing here is ever changed.

Overlay System Handles Views:

user_corrections → Stores user overrides (“Food → Entertainment”).

transactions_effective → Computed per-user view that merges raw + corrections + rules.

UI Surfacing:

When PCA_MODE=ON, chat renderer queries overlay tables.

Displays:

Raw record → “Original”

Effective view → “Corrected (your view)”

Flags for Safety:

SHOW_AUDIT_UI = false by default (UI invisible).

If toggled ON and something goes wrong → flip back to OFF, system instantly reverts to today’s single-view UI.

🧩 Data Flow (Safe by Design)

User logs: “Lunch 500.”

→ Raw entry stored in transactions_raw.

→ PCA writes effective entry in transactions_effective.

User corrects: “Change to Entertainment.”

→ user_corrections row created.

→ transactions_effective updated for that user only.

UI render:

Shows both Original + Corrected side-by-side.

Pulls from overlay, not raw, so raw integrity is preserved.

⚠️ Risk Controls

No mutation of raw: Original stays forever.

Additive only: Corrections and effective views live in overlays.

Instant rollback: Kill flag hides dual-view UI, reverting to legacy single-view.

Safe default: PCA_OVERLAY_ENABLED=false means users continue seeing exactly what they see today.

🚀 Why This is MVP-Critical

Without this, users can’t distinguish whether finbrain is recording faithfully or silently misclassifying. With it, they:

Trust the logs (because raw is visible).

Trust their corrections (because they see their version).

Trust the system (because nothing is hidden).

It’s a low-risk, high-value feature: UI-only, overlay-powered, flag-gated, and impossible to corrupt the core ledger.