Audit Transparency (UI)
ğŸ¯ PM View â€” Why It Matters

Trust is the product. Users wonâ€™t stick if they think their financial records are silently altered.

Transparency builds confidence. Showing â€œwhat was loggedâ€ vs. â€œwhat you correctedâ€ reassures users that the system is both accurate and under their control.

User promise: â€œfinbrain never hides the truth. Youâ€™ll always see the original record, and if you change it, your view updatesâ€”but the raw stays intact.â€

Example in Chat:

Original: Lunch 500 (Food)
Corrected: Entertainment (your view)

This gives users a clear, auditable trail without needing to trust the AI blindly.

ğŸ›  CTO View â€” How We Implement Safely

Core Ledger Untouchable:

The transactions_raw table remains append-only. Nothing here is ever changed.

Overlay System Handles Views:

user_corrections â†’ Stores user overrides (â€œFood â†’ Entertainmentâ€).

transactions_effective â†’ Computed per-user view that merges raw + corrections + rules.

UI Surfacing:

When PCA_MODE=ON, chat renderer queries overlay tables.

Displays:

Raw record â†’ â€œOriginalâ€

Effective view â†’ â€œCorrected (your view)â€

Flags for Safety:

SHOW_AUDIT_UI = false by default (UI invisible).

If toggled ON and something goes wrong â†’ flip back to OFF, system instantly reverts to todayâ€™s single-view UI.

ğŸ§© Data Flow (Safe by Design)

User logs: â€œLunch 500.â€

â†’ Raw entry stored in transactions_raw.

â†’ PCA writes effective entry in transactions_effective.

User corrects: â€œChange to Entertainment.â€

â†’ user_corrections row created.

â†’ transactions_effective updated for that user only.

UI render:

Shows both Original + Corrected side-by-side.

Pulls from overlay, not raw, so raw integrity is preserved.

âš ï¸ Risk Controls

No mutation of raw: Original stays forever.

Additive only: Corrections and effective views live in overlays.

Instant rollback: Kill flag hides dual-view UI, reverting to legacy single-view.

Safe default: PCA_OVERLAY_ENABLED=false means users continue seeing exactly what they see today.

ğŸš€ Why This is MVP-Critical

Without this, users canâ€™t distinguish whether finbrain is recording faithfully or silently misclassifying. With it, they:

Trust the logs (because raw is visible).

Trust their corrections (because they see their version).

Trust the system (because nothing is hidden).

Itâ€™s a low-risk, high-value feature: UI-only, overlay-powered, flag-gated, and impossible to corrupt the core ledger.