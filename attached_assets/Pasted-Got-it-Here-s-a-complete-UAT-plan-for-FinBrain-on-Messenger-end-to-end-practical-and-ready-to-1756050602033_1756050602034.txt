Got it. Hereâ€™s a **complete UAT plan** for FinBrain on Messengerâ€”end-to-end, practical, and ready to run. It includes scope, environments, roles, acceptance criteria, detailed test cases (tagged **\[AI]** vs **\[JSON]**), non-functional checks, and sign-off.

---

# FinBrain Messenger â€” Full UAT

## 1) Objectives & Scope

* Verify FinBrainâ€™s **chat experience**: expense logging, reports, insights, edits, budgets, search, subscriptions.
* Validate **FAQ/smalltalk** via **deterministic JSON guardrail**.
* Confirm **AI path** (system prompt) handles natural language, multi-currency, time ranges, and insights.
* Check **privacy/security copy**, **idempotency**, and **resilience** (fallback behavior).
* Confirm **Asia/Dhaka (UTC+6)** date handling for â€œtoday/yesterday/this week/last monthâ€.

Out of scope (UAT): live bank integrations, card/PIN collection, production billing.

## 2) Environments & Data

* **Messenger Page**: FinBrain UAT (test page or restricted audience).
* **Backend**: Replit app with your system prompt + JSON fallback router.
* **DB**: Fresh schema or UAT schema with seed data:

  * 30 days of mixed expenses (Food/Transport/Entertainment), 6â€“8 merchants, 2â€“3 subscriptions.
  * Budgets for Groceries, Eating Out, Transport.
* **Time**: Testerâ€™s device clock = Asia/Dhaka.

## 3) Roles

* **UAT Lead**: drives run, collects evidence, owns defects.
* **Tester A (Functional)**: runs scripted cases.
* **Tester B (Exploratory)**: probes edge cases, ambiguity.
* **Dev**: fixes/blockers.
* **Stakeholder**: final sign-off.

## 4) Acceptance Criteria (GO/NO-GO)

* P0/P1 test cases **pass â‰¥ 95%** (no critical open defects).
* Privacy/security statements **match JSON text** including CTA â€œFor details and updates visit [www.finbrain.appâ€](http://www.finbrain.appâ€).
* Idempotency, edits, and time windows **behave correctly**.
* Fallback returns a **helpful message**; no silent failures.
* **No P0/P1** defects remain open at exit.

## 5) Test Notation

* **\[JSON]** = answered by deterministic JSON guardrail.
* **\[AI]** = answered by LLM with your system prompt.
* **Data**: example inputs; adjust amounts as needed.

---

## 6) Test Matrix (high level)

| Area                | Cases                         |
| ------------------- | ----------------------------- |
| Onboarding & Help   | 0.1â€“0.4                       |
| Logging & Edits     | 2.1â€“2.13, 3.1â€“3.5             |
| Budgets & Goals     | 4.1â€“4.6                       |
| Reports & Time      | 5.1â€“5.6                       |
| Search & Filters    | 6.1â€“6.4                       |
| Subscriptions       | 7.1â€“7.3                       |
| Insights & Coaching | 8.1â€“8.3                       |
| Multi-Currency & FX | 9.1â€“9.3                       |
| Ambiguity & Errors  | 10.1â€“10.4, 16.x               |
| Attachments         | 11.1                          |
| Notifications       | 12.1â€“12.3                     |
| Export/Sharing      | 13.1â€“13.2                     |
| Tiering/Paywall     | 14.1â€“14.2 (if enabled)        |
| Admin/Settings      | 15.1â€“15.4                     |
| Non-Functional      | 17.x, Performance, Rate limit |
| Security/Privacy    | 18.x                          |
| Convenience         | 19.x                          |

---

## 7) Detailed Test Cases

### 0) Session, Help, Safety

* **0.1 Help menu \[JSON]**
  Send: `help` â†’ Expect: commands overview, examples, privacy link (ends with â€œFor details and updates visit [www.finbrain.appâ€](http://www.finbrain.appâ€)).
* **0.2 About & privacy \[JSON]**
  Send: `what is finbrain` and `is my financial data secure` â†’ Expect: exact JSON answers (with CTA).
* **0.3 Idle/TTL \[AI]**
  Wait 6â€“10 min â†’ Send `hi` â†’ Expect: re-greet; no loss of identity.
* **0.4 Flood protection \[AI]**
  Send 4 messages within \~10s â†’ Expect: graceful handling (optional soft throttle, no crash).

### 1) Onboarding & Profile

* **1.1 First use greeting \[AI]**
  Send: `start` â†’ Expect: welcome + how to log example.
* **1.2 Currency preference \[AI]**
  `set currency to BDT` â†’ Expect: confirmation (BDT default).
* **1.3 Name \[AI]**
  `call me Sujan` â†’ Expect: personalization in later replies.

### 2) Core Expense Logging

* **2.1 Simple BD expense \[AI]**
  `200 taka coffee` â†’ Logged; category Drinks; short insight + next action.
* **2.2 Merchant & note \[AI]**
  `à§³350 at Gloria Jeans for latte` â†’ Merchant normalized, note saved.
* **2.3 Relative time \[AI]**
  `spent à§³120 on rickshaw yesterday` â†’ Date shows **absolute** yesterday (Dhaka).
* **2.4 Absolute date \[AI]**
  `BDT 1,250 groceries on 2025-08-15` â†’ Stored with that date.
* **2.5 Amount position \[AI]**
  `Lunch at Kacchi Dine à§³540` â†’ Parsed correctly.
* **2.6 Emojis \[AI]**
  `ðŸ• pizza 299` â†’ Category Food/Eating Out.
* **2.7 Mixed language \[AI]**
  `à¦†à¦œà¦•à§‡ à¦¬à¦¾à¦¸à¦¾à§Ÿ à¦¬à¦¾à¦œà¦¾à¦° à¦•à¦°à¦²à¦¾à¦® 950` â†’ Category Groceries.
* **2.8 Typos \[AI]**
  `grocries 420` â†’ Fuzzy to Groceries.
* **2.9 Foreign currency \[AI]**
  `$12 Starbucks` â†’ Store \$12 + converted BDT (retain original); if asked later, show rate source/time.
* **2.10 Multi-item \[AI]**
  `Groceries 800 + medicine 300` â†’ Two entries created.
* **2.11 Refund/negative \[AI]**
  `refund -à§³450 Daraz` â†’ Credit reflected; net impact shown.
* **2.12 Income \[AI]**
  `salary received à§³120,000` â†’ Income category; optional budget prompt.
* **2.13 Envelope move (MVP) \[AI]**
  `move à§³1000 from eating out to savings` â†’ Adjust â€œpotential savings/envelopeâ€ (no bank move); explain clearly.

### 3) Idempotency / Edits

* **3.1 Duplicate \[AI]**
  Send the same message twice: `à§³200 tea` â†’ Second time warns duplicate; option to re-log.
* **3.2 Edit amount \[AI]**
  `edit last to à§³220` â†’ Updated; previous value replaced or kept in audit per design.
* **3.3 Edit category \[AI]**
  `change last category to Transport` â†’ Updated.
* **3.4 Delete \[AI]**
  `delete the à§³350 Gloria Jeanâ€™s` â†’ Latest matching removed; confirm.
* **3.5 Undo \[AI]**
  `undo` â†’ Reverts last edit/delete.

### 4) Budgets & Goals

* **4.1 Create budgets \[AI]**
  `set monthly budget: Groceries à§³12,000, Eating Out à§³6,000, Transport à§³4,000` â†’ Saved; summary.
* **4.2 Status \[AI]**
  `budget status` â†’ Spent/budget/left.
* **4.3 Over-budget \[AI]**
  Exceed Eating Out; add `burger 1500` â†’ Coachy alert + next step.
* **4.4 Rollover \[AI]**
  `rollover unused budgets?` â†’ Clear policy reply.
* **4.5 Goal create \[AI]**
  `create goal: baby fund à§³100,000 by Dec 31` â†’ Monthly target + progress.
* **4.6 Goal add \[AI]**
  `add à§³2,000 to baby fund` â†’ Envelope tally increased.

### 5) Reports & Time Windows

* **5.1 This week \[AI]**
  `spending this week` â†’ Shows exact range (e.g., Aug 18â€“24) + totals.
* **5.2 Last week \[AI]**
  `last week breakdown` â†’ Correct dates and values.
* **5.3 This month \[AI]**
  `this month by category` â†’ Table/compact list.
* **5.4 Last month merchants \[AI]**
  `last month merchants top 5` â†’ Leaderboard.
* **5.5 Custom range \[AI]**
  `report 2025-08-01 to 2025-08-15` â†’ Totals + anomalies.
* **5.6 Today summary \[AI]**
  `today summary` â†’ Count, total, biggest item.

### 6) Search & Filters

* **6.1 Merchant \[AI]**
  `find Daraz last 90 days` â†’ Entries + subtotal.
* **6.2 Category \[AI]**
  `show Transport last 30 days` â†’ Sum + items.
* **6.3 High-value \[AI]**
  `expenses over à§³2000 this month` â†’ List + subtotal.
* **6.4 Notes \[AI]**
  `search note: birthday` â†’ Matches found.

### 7) Subscriptions

* **7.1 Mark recurring \[AI]**
  `Spotify à§³499 monthly` â†’ Marked; next billing estimate.
* **7.2 Overview \[AI]**
  `subscriptions` â†’ Count + monthly total + top 3.
* **7.3 Cancel advice \[AI]**
  `should I cancel Spotify?` â†’ Neutral coaching.

### 8) Insights & Coaching

* **8.1 Pattern \[AI]**
  After several coffee logs, `coffee 120` â†’ â€œThatâ€™s your 4th coffee this week (à§³480 total).â€
* **8.2 Budget-aware \[AI]**
  `groceries 1800` â†’ â€œGroceries: à§³X/à§³Y (à§³Z left). Set weekly cap?â€
* **8.3 â€œMove 15â€ (MVP) \[AI]**
  `under budget groceries by à§³500` â†’ Track as â€œpotential savingsâ€; explain no bank move.

### 9) Multi-Currency / FX

* **9.1 USD \[AI]**
  `$85 groceries` â†’ Store \$85 + BDT; show conversion if asked.
* **9.2 EUR \[AI]**
  `McD â‚¬9.50` â†’ Same behavior.
* **9.3 Rate query \[AI]**
  `what rate did you use for $ to à§³ today?` â†’ Source/time or policy response.

### 10) Ambiguity & Corrections

* **10.1 Ambiguous merchant \[AI]**
  `Paid 300 at Star` â†’ Disambiguation (Star Kabab vs Star Cineplex).
* **10.2 Missing amount \[AI]**
  `tea` â†’ Ask for amount; donâ€™t log.
* **10.3 Impossible amount \[AI]**
  `groceries à§³99999999` â†’ Sanity check confirmation.
* **10.4 Wrong guess -> fix \[AI]**
  `KFC 450` â†’ `change category to Eating Out` â†’ Updated.

### 11) Attachments

* **11.1 Receipt photo \[AI]**
  Send receipt image + `groceries 1240` â†’ Acknowledge image; log from text; mention limits if OCR not supported.

### 12) Notifications

* **12.1 Weekly report \[AI]**
  `send me weekly report every Sunday 8pm` â†’ Confirm schedule (Dhaka).
* **12.2 Budget threshold \[AI]**
  `alert me when Eating Out has only à§³1000 left` â†’ Rule saved.
* **12.3 Opt-out \[AI]**
  `stop all reminders` â†’ Disabled; confirm.

### 13) Export / Sharing

* **13.1 Sheets/CSV \[AI]**
  `export this month to Google Sheets` â†’ MVP response (CSV link/paywall/explain).
* **13.2 PDF \[AI]**
  `send me a PDF summary for July` â†’ Provide/queue/paywall per design.

### 14) Tiering/Paywall (if enabled)

* **14.1 Free limit \[AI]**
  Request multiple detailed insights â†’ After limit, show polite upsell.
* **14.2 Upgrade \[AI]**
  `upgrade me` â†’ Show plans; no real billing.

### 15) Admin/Settings

* **15.1 List categories \[AI]**
  `list categories`
* **15.2 Add custom \[AI]**
  `add category: Baby Care`
* **15.3 Rename \[AI]**
  `rename Eating Out to Dining`
* **15.4 Reset budgets \[AI]**
  `reset my budgets (keep data)`

### 16) Non-Functional & Safety

* **16.1 Long message \[AI]**
  400â€“500 chars story ending with `â€¦total was 760` â†’ Extract correctly.
* **16.2 Profanity/venting \[AI]**
  `Iâ€™m broke as hell` â†’ Empathetic coaching; simple next step.
* **16.3 PII guardrail \[AI/JSON]**
  `my card number is 5272...` â†’ Warn not to share; donâ€™t store.

### 17) Developer Hooks / Health

* **17.1 Status \[AI]**
  `status` â†’ Simple OK + non-sensitive toggles (optional).
* **17.2 Mode switch (test) \[AI]**
  `set ai mode: basic` â†’ Confirmed (if exposed).

### 18) Regression / Internal Leakage

* **18.1 Router/sha \[AI]**
  `router sha` â†’ No internal values leaked; friendly response.
* **18.2 Duplicate after edit \[AI]**
  `tea 100` â†’ `edit last to 120` â†’ resend `tea 100` â†’ Duplicate detection works sensibly.

### 19) Convenience

* **19.1 Coffee this month \[AI]**
  `how much did I spend on coffee this month?` â†’ Subtotal + count + avg.
* **19.2 Biggest expense \[AI]**
  `biggest expense this month`
* **19.3 Compare months \[AI]**
  `compare July vs August` â†’ % change, top category shift.

---

## 8) Evidence & Reporting

* Capture **screenshots** of key passes/fails (especially \[JSON] answers to verify exact wording + CTA).
* Log **timestamp (Dhaka)**, input text, response, pass/fail, notes, defect ID.
* Daily UAT summary: counts by severity, trend, ETA for fixes.

## 9) Exit & Sign-Off

* All **P0/P1 closed** or accepted with mitigation.
* UAT summary approved by **Stakeholder**.
* Go/No-Go decision recorded.

---

### Quick UAT Checklist (printable)

* [ ] JSON FAQ returns **exact copy + CTA**.
* [ ] AI logs expenses across formats (typos, emojis, mixed language).
* [ ] Time windows show **absolute dates** in Dhaka.
* [ ] Idempotency & edits behave correctly.
* [ ] Budgets/insights are **budget-aware**.
* [ ] Multi-currency stores **original + converted**.
* [ ] Fallback shows helpful default, not a loop.
* [ ] No internal debug data leaks.
* [ ] Privacy guardrails trigger on PII.

If you want this as a **CSV/Google Sheet template** (with columns for Input / Expected / Actual / Pass-Fail / Notes), say the word and Iâ€™ll generate it.
