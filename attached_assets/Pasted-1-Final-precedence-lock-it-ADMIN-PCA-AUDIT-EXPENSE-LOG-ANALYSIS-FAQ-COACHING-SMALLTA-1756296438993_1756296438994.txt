1) Final precedence (lock it)

ADMIN → PCA_AUDIT → EXPENSE_LOG → ANALYSIS → FAQ → COACHING → SMALLTALK

EXPENSE_LOG must sit before ANALYSIS and SMALLTALK.

2) Expense-log rule (Bangla & English)

Trigger EXPENSE_LOG when:

has_money == True, and

first-person, past-tense “spent/paid/bought” verb is present.

BN verbs (examples): খরচ করেছি|খরচ করলাম|দিলাম|পেমেন্ট করেছি|কিনেছি|নিয়েছি
EN verbs (examples): spent|paid|bought|purchased

Do not treat bare “খরচ” as analysis. It’s only a logging cue with a verb.

If money detected but no verb → send a clarifying question (not smalltalk).

3) Clarify when ambiguous (money, no verb)

BN:

“Tea হিসেবে ৳50 আজ লগ করতে চান?
• হ্যাঁ, লগ করুন • না • বরং সারাংশ দেখান”

EN:

“Log ৳50 for Tea today?
• Yes, log it • No • Show summary instead”

“Yes” → EXPENSE_LOG

“Show summary” → ANALYSIS (and record a route_correction)

Minimal routing snippet (drop-in)
def decide_route(signals, session):
    # ADMIN / PCA_AUDIT first (unchanged)
    if signals.is_admin: return "ADMIN"
    if session.pca_audit_mode: return "PCA_AUDIT"

    # EXPENSE_LOG (money + first-person past-tense verb)
    if signals.has_money and signals.has_first_person_spent_verb:
        return "EXPENSE_LOG"

    # Ambiguous money → clarify
    if signals.has_money and not signals.explicit_analysis_request:
        return "CLARIFY_EXPENSE"

    # ANALYSIS (explicit or time window)
    if signals.explicit_analysis_request or signals.has_time_window or signals.has_analysis_terms:
        return "ANALYSIS"

    # FAQ / COACHING / SMALLTALK as you already shipped
    if signals.has_faq_terms: return "FAQ"
    if signals.has_coaching_verbs and session.eligible_for_coaching: return "COACHING"
    return "SMALLTALK"

Contract tests to lock behavior (must pass before deploy)

BN expense with verb → EXPENSE_LOG

Input: “আজ চা ৫০ টাকা খরচ করেছি”
Expect: EXPENSE_LOG and a stored expense (date=today, amount=50, category=Tea)

BN expense without verb → CLARIFY_EXPENSE

Input: “চা ৫০ টাকা”
Expect: Clarify prompt (yes/no/summary)

Explicit analysis wins even with money

Input: “এই মাসের খরচের সারাংশ দাও”
Expect: ANALYSIS

Coaching stays coaching

Input: “help me টাকা সেভ করতে this month”
Expect: COACHING

No false positives

Input: “আজ…” with no money and no verbs
Expect: not EXPENSE_LOG

One last preflight (no surprises)

Run these synthetic probes against your live endpoint pre-switch:

Probe A (BN log): “আজ চা ৫০ টাকা খরচ করেছি”
→ 201/200, expense row created, reply confirms logging

Probe B (BN ambiguous): “চা ৫০ টাকা”
→ Clarify prompt rendered

Probe C (analysis): “এই মাসের খরচের সারাংশ দাও”
→ Analysis bullets (AI on or resilient fallback)

Probe D (coaching): “help me reduce food spend”
→ Coaching plan returned

If any probe fails, don’t flip overlays.

Why SMALLTALK here is risky

It discards a clear “I spent X” intent (user frustration + data loss).

It breaks the “value on first message” promise for BN users.

It hides a regression (you’d think things are fine because it’s not ANALYSIS, but it’s still wrong).